(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{d8eE:function(t,e,n){"use strict";n.r(e),n.d(e,"RequestModule",(function(){return E}));var i=n("ofXK"),c=n("tyNb"),o=n("mrSG"),a=n("JIvj"),r=n("GHWL"),s=n("fXoL"),d=n("tk/3"),l=n("7lrx");let u=(()=>{class t{constructor(t,e){this._http=t,this._cacheService=e}getRequests(){return Object(o.a)(this,void 0,void 0,(function*(){try{const t=this._cacheService.load("token"),e=this._cacheService.load("userId"),n=`${r.a.API_ENDPOINT}${r.a.EVENTS_ENDPOINT}${r.a.REQUESTS_ENDPOINT}/${e}`,i=yield fetch(n,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:t},method:"GET"}),c=yield i.json();return""!=c.token&&null!=c.token&&null!=c.token&&(this._cacheService.remove("token"),this._cacheService.save({key:"token",data:c.token,expirationMins:60})),c}catch(t){console.log(t)}}))}acceptDiscardEvent(t){return Object(o.a)(this,void 0,void 0,(function*(){try{const e=this._cacheService.load("token"),n=`${r.a.API_ENDPOINT}${r.a.EVENTS_ENDPOINT}${r.a.REQUESTS_ENDPOINT}`,i=yield fetch(n,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:e},method:"POST",body:JSON.stringify(t)}),c=yield i.json();return""!=c.token&&null!=c.token&&null!=c.token&&(this._cacheService.remove("token"),this._cacheService.save({key:"token",data:c.token,expirationMins:60})),c}catch(e){console.log(e)}}))}}return t.\u0275fac=function(e){return new(e||t)(s.Yb(d.a),s.Yb(l.a))},t.\u0275prov=s.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var b=n("0IaG"),h=n("mnw+"),p=n("Sy1n"),v=n("Wp6s"),g=n("bTqV"),f=n("Xa2L");function m(t,e){if(1&t&&(s.Ub(0,"div",4),s.Ub(1,"p"),s.tc(2),s.Tb(),s.Tb()),2&t){const t=s.fc();s.Cb(2),s.uc(t.txtNotFound)}}function _(t,e){if(1&t){const t=s.Vb();s.Ub(0,"div",5),s.Ub(1,"mat-card",6),s.Ub(2,"div",7),s.Ub(3,"mat-card-title"),s.tc(4),s.Tb(),s.Ub(5,"mat-card-subtitle"),s.tc(6),s.Tb(),s.Tb(),s.Ub(7,"div"),s.Pb(8,"img",8),s.Ub(9,"div",9),s.Ub(10,"button",10),s.cc("click",(function(){s.mc(t);const n=e.$implicit;return s.fc().discardEvent(n)})),s.tc(11),s.Tb(),s.Ub(12,"button",11),s.cc("click",(function(){s.mc(t);const n=e.$implicit;return s.fc().acceptEvent(n)})),s.tc(13),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb()}if(2&t){const t=e.$implicit,n=s.fc();s.Cb(4),s.uc(t.name),s.Cb(2),s.uc(t.description),s.Cb(2),s.jc("src",t.image,s.nc),s.Cb(3),s.uc(n.buttonRechazar),s.Cb(2),s.uc(n.buttonAceptar)}}function O(t,e){1&t&&(s.Ub(0,"div",12),s.Ub(1,"div",13),s.Pb(2,"mat-spinner",14),s.Tb(),s.Tb())}let S=(()=>{class t{constructor(t,e,n,i,c){this._requestService=t,this._matDialog=e,this._dialogService=n,this._cacheService=i,this._appComponent=c,this.blSpinner=!1,this.notFound=!0,this.txtNotFound=r.a.GET_REQUEST_NOTFOUND,this.buttonRechazar=r.a.BUTTON_RECHAZAR,this.buttonAceptar=r.a.BUTTON_ACEPTAR}ngOnInit(){this.getRequests()}acceptEvent(t){t.userAdmId=this._cacheService.load("userId"),t.stateId=1,this.updateEvent(t)}discardEvent(t){t.userAdmId=this._cacheService.load("userId"),t.stateId=5,this.updateEvent(t)}openDialog(t,e){this._matDialog.open(a.a),this._dialogService.dialog.title=e,this._dialogService.dialog.content=t}getRequests(){return Object(o.a)(this,void 0,void 0,(function*(){this.blSpinner=!0;const t=yield this._requestService.getRequests();t.result?(this.dataSource=t.data,this.notFound=!1):(this.openDialog(t.msg,"Advertencia"),this.notFound=!0),this.blSpinner=!1}))}updateEvent(t){return Object(o.a)(this,void 0,void 0,(function*(){this.blSpinner=!0;const e=yield this._requestService.acceptDiscardEvent(t);if(e.result){this.openDialog(e.msg,"Informaci\xf3n");const t=yield this._requestService.getRequests();t.result?(this.dataSource=t.data,this.notFound=!1):(this.dataSource=[],this.notFound=!0)}else this.openDialog(e.msg,"Advertencia");this.blSpinner=!1}))}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(u),s.Ob(b.a),s.Ob(h.a),s.Ob(l.a),s.Ob(p.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-request"]],decls:4,vars:3,consts:[[1,"divMain"],["class","NotFound",4,"ngIf"],["class","divMainCard",4,"ngFor","ngForOf"],["class","overlay",4,"ngIf"],[1,"NotFound"],[1,"divMainCard"],["ng-mouseover","'background-color': 'red'grid.appScope.onRowHover(this);",1,"container"],[1,"txtContainer"],["width","388px","height","242",1,"md-user-avatar",3,"src"],[1,"clsButtons"],["mat-button","",1,"clsBtnRechazar",3,"click"],["mat-button","",1,"clsBtnAceptar",3,"click"],[1,"overlay"],[1,"center"],["diameter","70"]],template:function(t,e){1&t&&(s.Ub(0,"div",0),s.sc(1,m,3,1,"div",1),s.sc(2,_,14,5,"div",2),s.sc(3,O,3,0,"div",3),s.Tb()),2&t&&(s.Cb(1),s.ic("ngIf",e.notFound),s.Cb(1),s.ic("ngForOf",e.dataSource),s.Cb(1),s.ic("ngIf",e.blSpinner))},directives:[i.j,i.i,v.a,v.d,v.c,g.b,f.b],styles:[".mat-card-title[_ngcontent-%COMP%]{padding:2% 0 1%}.mat-card[_ngcontent-%COMP%]{width:60%;margin-bottom:2%}.mat-card[_ngcontent-%COMP%]:hover{box-shadow:0 0 30px -8px #006cd2}.divMainCard[_ngcontent-%COMP%], .NotFound[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}.txtContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;padding-right:4%}.container[_ngcontent-%COMP%]{display:flex;flex-direction:row}.mat-card-subtitle[_ngcontent-%COMP%], .mat-card-subtitle[_ngcontent-sqb-c88][_ngcontent-%COMP%], .mat-card-title[_ngcontent-%COMP%], .mat-card-title[_ngcontent-sqb-c88][_ngcontent-%COMP%]{font-family:Raleway Medium!important}.clsButtons[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-top:2%;justify-content:space-between;padding-left:8%;padding-right:2%}.clsBtnRechazar[_ngcontent-%COMP%]{color:#d3d3d3!important}.clsBtnAceptar[_ngcontent-%COMP%], .clsBtnRechazar[_ngcontent-%COMP%]{font-family:Raleway Medium!important;font-size:18px}.clsBtnAceptar[_ngcontent-%COMP%]{color:#006cd2!important}"]}),t})();var T=n("+0xr"),C=n("zkoq");const y=[{path:"",component:S}];let E=(()=>{class t{}return t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({factory:function(e){return new(e||t)},imports:[[i.b,c.c.forChild(y),T.a,v.b,C.b,b.d,f.a,g.c]]}),t})()}}]);